<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí£ DEFUSE THE BOMB üí£</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- API Key Input Modal -->
        <div class="api-modal" id="api-modal">
            <div class="api-modal-content">
                <h2>üîë ENTER CHATGPT API KEY</h2>
                <p>Required for question generation</p>
                <input type="password" id="api-key-input" placeholder="sk-...">
                <button onclick="saveApiKey()" class="api-btn">ACTIVATE SYSTEM</button>
                <div class="api-warning">‚ö†Ô∏è Without API key, fallback questions will be used</div>
            </div>
        </div>
        
        <div class="bomb-container">
            <div class="timer-display">
                <div class="timer-label">TIME REMAINING</div>
                <div class="timer" id="timer">05:00</div>
                <div class="timer-warning" id="timer-warning">‚ö†Ô∏è CRITICAL ‚ö†Ô∏è</div>
            </div>
            
            <div class="bomb-body">
                <div class="bomb-core">
                    <div class="led-matrix" id="led-matrix"></div>
                    <div class="status-display" id="status-display">
                        <div class="status-text">ARMED - DEFUSE ALL WIRES</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                    </div>
                </div>
                
                <div class="wires-container">
                    <!-- Red Wire - AI Challenge -->
                    <div class="wire-module" data-wire="red">
                        <div class="wire-header">
                            <span class="wire-color">üî¥ RED WIRE</span>
                            <span class="wire-status" id="red-status">ARMED</span>
                        </div>
                        <div class="wire-challenge" id="red-challenge">
                            <div class="challenge-title" id="red-title">üß† LOADING CHALLENGE...</div>
                            <div class="challenge-container">
                                <div class="challenge-text" id="red-text">Generating random challenge...</div>
                                <div class="challenge-input">
                                    <input type="text" id="red-answer" placeholder="Enter your answer...">
                                    <button onclick="checkWireAnswer('red')" class="solve-btn">SOLVE</button>
                                </div>
                                <button onclick="generateNewChallenge('red')" class="refresh-btn">üîÑ NEW CHALLENGE</button>
                            </div>
                        </div>
                    </div>

                    <!-- Blue Wire - AI Challenge -->
                    <div class="wire-module" data-wire="blue">
                        <div class="wire-header">
                            <span class="wire-color">üîµ BLUE WIRE</span>
                            <span class="wire-status" id="blue-status">ARMED</span>
                        </div>
                        <div class="wire-challenge" id="blue-challenge">
                            <div class="challenge-title" id="blue-title">üî¢ LOADING CHALLENGE...</div>
                            <div class="challenge-container">
                                <div class="challenge-text" id="blue-text">Generating random challenge...</div>
                                <div class="challenge-input">
                                    <input type="text" id="blue-answer" placeholder="Enter your answer...">
                                    <button onclick="checkWireAnswer('blue')" class="solve-btn">SOLVE</button>
                                </div>
                                <button onclick="generateNewChallenge('blue')" class="refresh-btn">üîÑ NEW CHALLENGE</button>
                            </div>
                        </div>
                    </div>

                    <!-- Green Wire - AI Challenge -->
                    <div class="wire-module" data-wire="green">
                        <div class="wire-header">
                            <span class="wire-color">üü¢ GREEN WIRE</span>
                            <span class="wire-status" id="green-status">ARMED</span>
                        </div>
                        <div class="wire-challenge" id="green-challenge">
                            <div class="challenge-title" id="green-title">üå≥ LOADING CHALLENGE...</div>
                            <div class="challenge-container">
                                <div class="challenge-text" id="green-text">Generating random challenge...</div>
                                <div class="challenge-input">
                                    <input type="text" id="green-answer" placeholder="Enter your answer...">
                                    <button onclick="checkWireAnswer('green')" class="solve-btn">SOLVE</button>
                                </div>
                                <button onclick="generateNewChallenge('green')" class="refresh-btn">üîÑ NEW CHALLENGE</button>
                            </div>
                        </div>
                    </div>

                    <!-- Yellow Wire - AI Challenge -->
                    <div class="wire-module" data-wire="yellow">
                        <div class="wire-header">
                            <span class="wire-color">üü° YELLOW WIRE</span>
                            <span class="wire-status" id="yellow-status">ARMED</span>
                        </div>
                        <div class="wire-challenge" id="yellow-challenge">
                            <div class="challenge-title" id="yellow-title">üîê LOADING CHALLENGE...</div>
                            <div class="challenge-container">
                                <div class="challenge-text" id="yellow-text">Generating random challenge...</div>
                                <div class="challenge-input">
                                    <input type="text" id="yellow-answer" placeholder="Enter your answer...">
                                    <button onclick="checkWireAnswer('yellow')" class="solve-btn">SOLVE</button>
                                </div>
                                <button onclick="generateNewChallenge('yellow')" class="refresh-btn">üîÑ NEW CHALLENGE</button>
                            </div>
                        </div>
                    </div>

                    <!-- Purple Wire - AI Challenge -->
                    <div class="wire-module" data-wire="purple">
                        <div class="wire-header">
                            <span class="wire-color">üü£ PURPLE WIRE</span>
                            <span class="wire-status" id="purple-status">ARMED</span>
                        </div>
                        <div class="wire-challenge" id="purple-challenge">
                            <div class="challenge-title" id="purple-title">üìä LOADING CHALLENGE...</div>
                            <div class="challenge-container">
                                <div class="challenge-text" id="purple-text">Generating random challenge...</div>
                                <div class="challenge-input">
                                    <input type="text" id="purple-answer" placeholder="Enter your answer...">
                                    <button onclick="checkWireAnswer('purple')" class="solve-btn">SOLVE</button>
                                </div>
                                <button onclick="generateNewChallenge('purple')" class="refresh-btn">üîÑ NEW CHALLENGE</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="explosion-overlay" id="explosion-overlay">
                <div class="explosion-text">üí• BOOM! üí•</div>
                <div class="game-over-text">MISSION FAILED</div>
                <div class="overlay-buttons">
                    <button onclick="resetGame()" class="overlay-btn primary">üîÑ RESET GAME</button>
                    <button onclick="playAgain()" class="overlay-btn secondary">üéÆ PLAY AGAIN</button>
                </div>
            </div>
            
            <div class="success-overlay" id="success-overlay">
                <div class="success-text">‚úÖ BOMB DEFUSED! ‚úÖ</div>
                <div class="mission-complete-text">MISSION ACCOMPLISHED</div>
                <div class="time-bonus" id="time-bonus"></div>
                <div class="overlay-buttons">
                    <button onclick="playAgain()" class="overlay-btn primary">üéÆ PLAY AGAIN</button>
                    <button onclick="resetGame()" class="overlay-btn secondary">üîÑ RESET GAME</button>
                </div>
            </div>
        </div>
        
        <div class="controls">
            <button onclick="resetGame()" class="control-btn">üîÑ RESET GAME</button>
            <button onclick="playAgain()" class="control-btn">üéÆ PLAY AGAIN</button>
            <button onclick="toggleInstructions()" class="control-btn">üìã INSTRUCTIONS</button>
            <button onclick="showApiModal()" class="control-btn">üîë API KEY</button>
            <button onclick="showStats()" class="control-btn">üìä STATISTICS</button>
            <div class="difficulty-selector">
                <label>Difficulty:</label>
                <select id="difficulty" onchange="changeDifficulty()">
                    <option value="easy">Beginner (7:00)</option>
                    <option value="medium" selected>Expert (5:00)</option>
                    <option value="hard">Insane (3:00)</option>
                    <option value="nightmare">Nightmare (2:00)</option>
                </select>
            </div>
        </div>
        
        <div class="instructions" id="instructions">
            <h3>üö® BOMB DEFUSAL MANUAL üö®</h3>
            <div class="instruction-content">
                <p><strong>üéØ MISSION:</strong> Defuse all 5 wires before time runs out!</p>
                
                <div class="wire-descriptions">
                    <div><strong>üî¥ RED WIRE:</strong> Random mathematical puzzles & logic problems</div>
                    <div><strong>üîµ BLUE WIRE:</strong> Computer science algorithms & data structures</div>
                    <div><strong>üü¢ GREEN WIRE:</strong> Programming logic & computational thinking</div>
                    <div><strong>üü° YELLOW WIRE:</strong> Cryptography & security challenges</div>
                    <div><strong>üü£ PURPLE WIRE:</strong> Advanced algorithms & graph theory</div>
                </div>
                
                <div class="stats-display">
                    <h4>üéÆ GAME CONTROLS</h4>
                    <p><strong>üîÑ RESET GAME:</strong> Restart current game with new challenges</p>
                    <p><strong>üéÆ PLAY AGAIN:</strong> Start completely fresh game (clears progress)</p>
                    <p><strong>üìä STATISTICS:</strong> View your performance stats</p>
                    <p><strong>üíæ AUTO-SAVE:</strong> Game automatically saves every 5 seconds</p>
                </div>
                
                <div class="stats-display">
                    <h4>‚å®Ô∏è KEYBOARD SHORTCUTS</h4>
                    <p><strong>Ctrl+R:</strong> Reset Game | <strong>Ctrl+H:</strong> Get Hints</p>
                    <p><strong>Ctrl+S:</strong> Manual Save | <strong>Ctrl+1-5:</strong> Focus Wire</p>
                    <p><strong>Enter:</strong> Submit Answer | <strong>‚Üë‚Üë‚Üì‚Üì‚Üê‚Üí‚Üê‚ÜíBA:</strong> Konami Code</p>
                </div>
                
                <p><strong>‚ö†Ô∏è WARNING:</strong> Each wire has completely random AI-generated challenges!</p>
                <p><strong>üîë SETUP:</strong> Enter your ChatGPT API key for question generation</p>
                <p><strong>üíæ RECOVERY:</strong> Game will offer to recover if you accidentally refresh</p>
                
                <div style="text-align: center; margin-top: 20px;">
                    <button onclick="clearStats()" class="control-btn" style="background: linear-gradient(45deg, #ff4757, #c44569);">üóëÔ∏è CLEAR STATS</button>
                </div>
            </div>
        </div>
    </div>

    <script src="challenges.js"></script>
    <script src="script.js"></script>
</body>
</html>